<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Music Player</title>
    <link rel="icon" href="data:,">
</head>
<body>
    <div class="container mt-5" id="songsContainer">
        <!-- Aquí se mostrarán las canciones dinámicamente -->
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Llamamos a la función loadJSON con la URL del archivo JSON en línea
            loadJSON('https://raw.githubusercontent.com/DanielLazaro1555/Musica1/main/public/bd.json');
        });

        function loadJSON(jsonPath) {
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        try {
                            var jsonData = JSON.parse(xhr.responseText);

                            // Verificamos si jsonData es un array o un objeto
                            if (Array.isArray(jsonData)) {
                                displaySongs(jsonData);
                            } else if (typeof jsonData === 'object' && jsonData !== null) {
                                // Si es un objeto, creamos un array con ese objeto
                                displaySongs([jsonData]);
                            } else {
                                console.error('El archivo JSON no contiene un array de canciones ni un objeto válido.');
                            }
                        } catch (error) {
                            console.error('Error al analizar el archivo JSON:', error);
                        }
                    } else {
                        console.error('Error al cargar el archivo JSON. Código de estado:', xhr.status);
                    }
                }
            };
            xhr.open('GET', jsonPath, true);
            xhr.send();
        }

        function displaySongs(songsData) {
            var songsContainer = document.getElementById('songsContainer');

            // Iteramos sobre cada canción en el JSON
            songsData.forEach(function(song, index) {
                var songCard = document.createElement('div');
                songCard.className = 'card';
                songCard.innerHTML = `
                    <div class="card-body">
                        <h5 class="card-title">${song.archivo_musica || 'Desconocido'}</h5>
                        <p class="card-text">Descripción: ${song.descripcion || 'Desconocido'}</p>
                        <img src="${song.imagen || 'ruta/al/archivo/default.jpg'}" alt="Imagen del álbum">
                        <audio controls>
                            <source src="${song.archivo_musica || 'ruta/al/archivo/default.mp3'}">
                            Tu navegador no soporta el elemento de audio.
                        </audio>
                    </div>
                `;

                songsContainer.appendChild(songCard);
            });
        }
    </script>
</body>
</html>
